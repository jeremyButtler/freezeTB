# Goal:

This is not very great, but it is here to give you an
  idea on how this code functions and how to navigate
  the code.

# The first function:

The first step in this code is to read in the 2023
  catalog. This is done by the WHO2023Catalog\_whoToAmr
  function (fun05 whoToTbAmr.h). This function reads in
  the genome indice tab (tab 2) using functions in
  genIndiceStruct.c/h. It then uses the master tab tsv
  file to extract the AMRs.

The input for WHO2023Catalog\_whoToAmr is:

  - C-string with path to the master tab (tab 1)
  - C-string with path to the genome indices tab (tab 2)
  - Pointer to an unsigned long to hold the number of AMRs
  - Pointer to an c-string to hold the antibiotic names
    - use the free function to free this.
  - Pointer to an integer to hold the number of
    antibiotics
  - Boolean: 1 to keep non-resitance AMRs (grade 3 to 5)
  - Boolean: 1 to keep entire gene deletions
  - Pointer to an character to hold the error message
    - Set to def\_meErr\_amrST for memory errors
    - Set to def\_fileErr\_amrST for file errors

The return value is an array amrST (see st01 in
  amrST.h). It needs to be freeded with
  freeHeapAry_amrST(&amrST, number\_of\_AMRs).

# The second function:

The second function you will need to call is
  parseVarId\_whoToAmr (fun06; whoToAmr.c/h). This
  uses the variant ids in the AMR array (from fun05) to
  find the codon number and amino acid sequence.

the input for who\_parse\_varID is 

- the amrST structure array from read\_2023\_whoAmrTsv
- The number of amrSTs in the amrST array

This function returns 0 for success and
  def\_memErr\_amrST for memory error. It will never
  free the amrST array.

# The third function:

The third functio is addCodonPos_whoToAmr (fun08
  whoToTbAmr.c/h). This functions takes uses the
  AMR array processed by variant ids from
  parseVarId\_whoToAmr (fun06) and then finds genome
  coordinates, reference position of first codon,
  and reading frame. It will also fill in missing amino
  acid sequences for large deletions and duplications.

Input for addCodonPos_whoToAmr:

- amrST array modifed by who\_parse\_varId
- number of AMRs (length of amrST array)
- The path to the gene table
- The path to the reference file

Returns 0 for success, def\_memErr\_amrST for memory
  errors, and def\_fileErr\_amrST for file errors.
  This will never free any input.

# The fourth function:

The final function is p_amrST (fun10 amrST.c/h), which
  prints out the entries in AMR array to an file.

Input for pAmrDB:

- amrST array form whoAddCodonPos
- number of AMRs (length of amrST array)
- Pointer to c-string to with the antibiotic names
  - This was filled in by WHO2023Catalog_whoToAmr (fun05)
- Pointer to an integer to hold the number of
    antibiotics
  - This was filled in by WHO2023Catalog_whoToAmr (fun05)
- C-string with the file name to output to
  - nothing (null) or '-' is for stdout

# Reading in AMRs:

Use readTBl_amrST (fun11 in amrST.c/h). Check the
  function header to see how it works. This returns an
  array of amrST structs. There may be some pointers set
  to null.

# Style:

My style is very odd.

First I only include libraries in my .c files.

I also use a series of headers to allow my to quickly
  jump around in code. My method is to keep the table
  of content entries in lower case and have the first
  letter of each header in uppercase. That way I can
  type `Fun01` to go to function 01 quickly. Or type
  `License:` to move to the license quickly. Sometimes
  this method is confusing, sometimes I ingore it and use
  page down, other times it is really usefull.

## Block one file header

I often start the file off with a header block that holds
  a description of the files tasks.

```
/*########################################################
# Name: file-name
#   - description
########################################################*/
```

## Block two file table of contents

The next entry is a table of contents for the whole
  file (both for .c and .h)

```
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\
' SOF: Start Of File
'   o header:
'     - description of what is in header
'   o fun01: name
'     - description of functions task
'   o fun02: name
'     - description of functions task
'   o fun03: name
'     - description of functions task
'   .
'   .
'   .
'   o funxx: name
'     - description of functions task
'   o license:
'     - licensing for this code (license name(s))
\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
```

The values inside the SOF are fun (for function/macro),
  st (for structure), and header (for header section).
  Each entry can be preceded by an `.h` for only in the
  `.h` file or `.c` for only in the `.c` file. Older
  variations may not have this. Each entry is lower case
  to allow searching with upper case (ex: `Fun01` to find
  fuction 01).

## Block three file the real header block

The next entry is my header block

```
/*-------------------------------------------------------\
| Header:
|   - description of what is in header
\-------------------------------------------------------*/
```

This is for the libraries (.c files only), the
  defined/global variables (often .h), and the header
  guards (.h only) (in case someone else uses).

## Block four; function blocks

The next entries are my blocks marking each functio


```
/*-------------------------------------------------------\
| Fun01: name
|   - Descritpion of what function does
| Input:
|   - variable 1:
|     - description of varible one
|   - variable 2:
|     - description of varible two
|   - variable 3:
|     - description of varible three
|   .
|   .
|   .
|   - variable n:
|     - description of varible n
| Output:
|   - Returns:
|     o return value success
|     o return value failure
\-------------------------------------------------------*/
```

This block starts of with the function number, then the
  name. It then provides and description. Then it lists
  what the input is and what I expect it to look like.
  After this is the output.

Some common output items:

- Returns: Returns something from the function
- Modifies: Modifies input values
- Frees: Frees input values
- Prints: Prints out something

## Extra blocks:

### Function table of contents:

The table of contents for the fuction, which has an
  description and lists all the sections in the function.
  This is only present when the fuctio is divided into
  sections.

```
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\
' Fun01 TOC:
'   - repeat description of function
'   o fun01 sec01:
'     - description of section one
'   o fun01 sec02:
'     - description of section two
'   o fun01 sec03:
'     - description of section three
'   .
'   .
'   .
'   o fun01 secxx:
'     - description of section xx
\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
```

### Sections:

After the mandatory blocks there can also be section
  (sec) blocks which list what they do and any subsections
  they have.

Simple version

```
/*>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\
^ Fun01 Sec01:
^   - description of section 01
\<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<*/
```

Version with subsections

```
/*>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\
^ Fun01 Sec01:
^   - description of section 01
^   o fun01 sec01 sub01:
^     - description of the 1st subsection of section one
^   o fun01 sec01 sub02:
^     - description of the 2nd subsection of section one
^   o fun01 sec01 sub03:
^     - description of the 3rd subsection of section one
^   .
^   .
^   .
^   o fun01 sec01 subxx:
^     - description of the nth subsection of section one
\<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<*/
```

### Subsections:

The subsection blocks are withing sections and have an
  description about what they do and list any catagories.
  Most of the time these will not have any cataogires and
  will just be an description line.

Simple version


```
/********************************************************\
* Fun01 Sec01 Sub01:
*   - description of section 01 subsection 01
\********************************************************/
```

Version with catagories


```
/********************************************************\
* Fun01 Sec01 Sub01:
*   - description of section 01 subsection 01
*   o fun01 sec01 sub01 cat01:
*     - description of 1st subsection of section 1 cat 01
*   o fun01 sec01 sub01 cat02:
*     - description of 2nd subsection of section 1 cat 02
*   o fun01 sec01 sub01 cat03:
*     - description of 3rd subsection of section 1 cat 03
*   .
*   .
*   .
*   o fun01 sec01 sub01 catxx:
*     - description of  nth subsection of section 1 cat xx
\********************************************************/
```

### Catagories

The catagories blocks are the end of the dividing. They
  have a breif description.


```
/*+++++++++++++++++++++++++++++++++++++++++++++++++++++++\
+ Fun01 Sec01 Sub01 Cat01:
+   - description of section 01 subsection 01 Catagory 01
\+++++++++++++++++++++++++++++++++++++++++++++++++++++++*/
```

## License block:

At the end of the file is the license block. This one is
  rather new for me.


```
/*=======================================================\
: License:
: 
: This code is under the unlicense (public domain).
:   However, for cases were the public domain is not
:   suitable, such as countries that do not respect the
:   public domain or were working with the public domain
:   is inconvient / not possible, this code is under the
:   MIT license.
: 
: Public domain:
: 
: This is free and unencumbered software released into the
:   public domain.
: 
: Anyone is free to copy, modify, publish, use, compile,
:   sell, or distribute this software, either in source
:   code form or as a compiled binary, for any purpose,
:   commercial or non-commercial, and by any means.
: 
: In jurisdictions that recognize copyright laws, the
:   author or authors of this software dedicate any and
:   all copyright interest in the software to the public
:   domain. We make this dedication for the benefit of the
:   public at large and to the detriment of our heirs and
:   successors. We intend this dedication to be an overt
:   act of relinquishment in perpetuity of all present and
:   future rights to this software under copyright law.
: 
: THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF
:   ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
:   LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
:   FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO
:   EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM,
:   DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
:   CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
:   IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
:   DEALINGS IN THE SOFTWARE.
: 
: For more information, please refer to
:   <https://unlicense.org>
: 
: MIT License:
: 
: Copyright (c) 2024 jeremyButtler
: 
: Permission is hereby granted, free of charge, to any
:   person obtaining a copy of this software and
:   associated documentation files (the "Software"), to
:   deal in the Software without restriction, including
:   without limitation the rights to use, copy, modify,
:   merge, publish, distribute, sublicense, and/or sell
:   copies of the Software, and to permit persons to whom
:   the Software is furnished to do so, subject to the
:   following conditions:
: 
: The above copyright notice and this permission notice
:   shall be included in all copies or substantial
:   portions of the Software.
: 
: THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF
:   ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
:   LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
:   FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
:   EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE
:   FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
:   AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
:   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
:   USE OR OTHER DEALINGS IN THE SOFTWARE.
\=======================================================*/
```
